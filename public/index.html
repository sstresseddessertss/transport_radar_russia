<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöä –†–∞–¥–∞—Ä —Ç—Ä–∞–º–≤–∞–µ–≤ –ú–æ—Å–∫–≤—ã</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üöä</text></svg>">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <main>
            <div class="form-section">
                <div class="add-stop-section">
                    <h3>–î–æ–±–∞–≤–∏—Ç—å –æ—Å—Ç–∞–Ω–æ–≤–∫—É</h3>
                    <p class="instruction">–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ¬´–ú–æ—Å–∫–æ–≤—Å–∫–∏–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç¬ª –∏–ª–∏ moscowapp.mos.ru, –Ω–∞–π–¥–∏—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∫—É –∏ —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å—Å—ã–ª–∫—É</p>
                    <div class="add-stop-form">
                        <input 
                            type="text" 
                            id="stop-url-input" 
                            class="stop-url-input" 
                            placeholder="https://moscowapp.mos.ru/stop?id=..."
                        >
                        <button id="add-stop-btn" class="add-stop-btn">–î–æ–±–∞–≤–∏—Ç—å</button>
                    </div>
                    <div id="add-stop-message" class="add-stop-message" style="display: none;"></div>
                </div>
                
                <div class="divider"></div>
                
                <div class="form-group">
                    <label for="departure-stop">–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è:</label>
                    <select id="departure-stop" class="stop-select">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∫—É...</option>
                    </select>
                </div>

                <div class="form-group" id="tram-selection-group" style="display: none;">
                    <label>–í—ã–±–æ—Ä —Ç—Ä–∞–º–≤–∞–µ–≤:</label>
                    <div id="tram-checkboxes" class="tram-checkboxes">
                        <!-- Dynamically populated -->
                    </div>
                </div>

                <button id="monitoring-btn" class="monitoring-btn monitoring-btn-off" disabled>
                    –ú–û–ù–ò–¢–û–†–ò–ù–ì
                </button>
                
                <button id="view-history-btn" class="view-history-btn" style="display: none;">
                    üìä –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏–±—ã—Ç–∏–π
                </button>
                
                <button id="notification-btn" class="notification-btn" style="display: none;">
                    üîî –û–ø–æ–≤–µ—Å—Ç–∏—Ç—å
                </button>
            </div>

            <div id="error-message" class="error-message" style="display: none;"></div>
            
            <div id="notification-setup" class="notification-setup" style="display: none;">
                <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è</h3>
                <div class="notification-form">
                    <div class="form-group-inline">
                        <label for="notify-time">–û–ø–æ–≤–µ—Å—Ç–∏—Ç—å –∑–∞:</label>
                        <select id="notify-time" class="notify-select">
                            <option value="1">1 –º–∏–Ω—É—Ç—É</option>
                            <option value="2">2 –º–∏–Ω—É—Ç—ã</option>
                            <option value="3" selected>3 –º–∏–Ω—É—Ç—ã</option>
                            <option value="5">5 –º–∏–Ω—É—Ç</option>
                            <option value="10">10 –º–∏–Ω—É—Ç</option>
                            <option value="15">15 –º–∏–Ω—É—Ç</option>
                        </select>
                    </div>
                    <div class="form-group-inline">
                        <label for="notify-tram">–¢—Ä–∞–º–≤–∞–π:</label>
                        <select id="notify-tram" class="notify-select">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
                        </select>
                    </div>
                    <div class="notification-actions">
                        <button id="confirm-notification-btn" class="confirm-notification-btn">–í–∫–ª—é—á–∏—Ç—å</button>
                        <button id="cancel-notification-btn" class="cancel-notification-btn">–û—Ç–º–µ–Ω–∞</button>
                    </div>
                </div>
                <div id="active-notifications" class="active-notifications" style="display: none;">
                    <h4>–ê–∫—Ç–∏–≤–Ω—ã–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è:</h4>
                    <div id="notifications-list"></div>
                </div>
            </div>

            <div id="results-section" class="results-section" style="display: none;">
                <h2>–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ</h2>
                <div id="results" class="results">
                    <!-- Dynamically populated -->
                </div>
                <div class="legend">
                    <span class="legend-item">
                        <span class="telemetry-badge">GPS</span> = –¥–∞–Ω–Ω—ã–µ –ø–æ GPS (—Ç–æ—á–Ω–æ)
                    </span>
                    <span class="legend-item">
                        <span class="schedule-badge">–†–ê–°</span> = —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)
                    </span>
                </div>
            </div>
            
            <div id="history-section" class="history-section" style="display: none;">
                <div class="history-header">
                    <h2>–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏–±—ã—Ç–∏–π</h2>
                    <button id="close-history-btn" class="close-history-btn">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
                </div>
                
                <div class="history-filters">
                    <div class="filter-group">
                        <label for="history-date-from">–° –¥–∞—Ç—ã:</label>
                        <input type="date" id="history-date-from" class="history-date-input">
                    </div>
                    <div class="filter-group">
                        <label for="history-date-to">–î–æ –¥–∞—Ç—ã:</label>
                        <input type="date" id="history-date-to" class="history-date-input">
                    </div>
                    <div class="filter-group">
                        <label for="history-vehicle-filter">–¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç:</label>
                        <select id="history-vehicle-filter" class="history-select">
                            <option value="">–í—Å–µ</option>
                        </select>
                    </div>
                    <button id="apply-history-filters-btn" class="apply-filters-btn">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
                    <button id="reset-history-filters-btn" class="reset-filters-btn">–°–±—Ä–æ—Å–∏—Ç—å</button>
                </div>
                
                <div id="history-loading" class="history-loading" style="display: none;">
                    –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏...
                </div>
                
                <div id="history-error" class="history-error" style="display: none;"></div>
                
                <div id="history-results" class="history-results">
                    <!-- Dynamically populated -->
                </div>
                
                <div id="history-pagination" class="history-pagination" style="display: none;">
                    <button id="history-prev-btn" class="pagination-btn">‚Üê –ù–∞–∑–∞–¥</button>
                    <span id="history-page-info" class="page-info"></span>
                    <button id="history-next-btn" class="pagination-btn">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
                </div>
            </div>
        </main>

        <footer>
            <p>–î–∞–Ω–Ω—ã–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω—ã moscowtransport.app</p>
            <p>
                <a href="https://github.com/sstresseddessertss/transport_radar_russia" target="_blank" rel="noopener noreferrer" class="github-link">
                    <svg width="20" height="20" viewBox="0 0 16 16" fill="currentColor" style="vertical-align: middle;">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    GitHub –ø—Ä–æ–µ–∫—Ç–∞
                </a>
            </p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>
